---
import BookLayout from '../../layouts/BookLayout.astro';
import Book from '../../components/Content/Books/Book';
export async function getStaticPaths() {
	const viewer = 'https://sites.dlib.nyu.edu/viewer';
	const start = 0;
	const rows = 1000;
	const collection = 'io';
	const type = 'dlts_book';
	const data = await fetch(`${viewer}/api/v1/objects?collection=${collection}&type=${type}&start=${start}&rows=${rows}`).then(response => { return response.json(); });
	return data.response.docs.map((doc) => {
    return {
      "params": {
				"identifier": doc.identifier
			},
      "props": { doc },
    };
  });
}

const { identifier } = Astro.params;

const pageDescription = 'books';

const { title } = Astro.props;

const viewer = import.meta.env.PUBLIC_VIEWERURL;

---

<BookLayout
  title={title}
  description={pageDescription}
>
	<Book viewer={viewer} title={title} identifier={identifier} client:only/>
</BookLayout>
