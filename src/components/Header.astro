---
import NavigationItem from "./Navigation/NavigationItem.astro";
import NavigationMobileMenu from "./Navigation/NavigationMobileMenu.astro";

const appUrl = 'http://localhost:3000'

const appName = 'Indian Ocean Digital Collection'

const HeaderNavigationItems = [
    {
      label: 'Home',
      route: `/`,
      class: 'Homelink',
    },
    {
      label: 'About',
      route: `about`,
      class: 'Aboutlink',
    },
    {
      label: 'Browse',
      route: `/browse`,
      class: 'Browselink',
    },
  ]
---

<header>
  <div class="header-wrapper">
    <header class="header-main container-fluid" role="banner">
      <h1 class="sitename"><a href={appUrl}>{appName}</a></h1>
    </header>
  </div>
  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <NavigationMobileMenu/>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="navbar-collapse" >
        <ul class="nav navbar-nav">
          {
            HeaderNavigationItems.map((item) => (
              <NavigationItem route={item.route} className={item.class} label={item.label}/>
            ))
          }
        </ul>
        <div class="search_holder widget navbar-form navbar-right">
          <form method="get" action={`${appUrl}/search`} role="search">
            <input value="" name="q" type="text" placeholder="Search titles, subjects, authors..." title="Enter the terms you wish to search for." aria-label="Search">
            <input type="submit" class="submit-search" aria-label="Submit Search">
          </form>
					<script>
            // Get the URL of the current page
            const url = new URL(window.location.href)
            // Get the value of 'q' from the query string
						document.querySelector('input[name="q"]').value = url.searchParams.get('q') ? url.searchParams.get('q') : ''
					</script>
        </div>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
</header>
