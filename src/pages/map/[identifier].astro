---
import MapLayout from '../../layouts/MapLayout.astro';
import Map from '../../components/Content/Maps/Map';

export async function getStaticPaths() {
	const viewer = import.meta.env.PUBLIC_VIEWERURL;
	const start = 0;
	const rows = '1000';
	const collection = import.meta.env.PUBLIC_COLLECTIONCODE;
	const type = import.meta.env.PUBLIC_MAP;
	const data = await fetch(`${viewer}/api/v1/objects?collection=${collection}&type=${type}&start=${start}&rows=${rows}`).then(response => { return response.json(); });
	return data.response.docs.map(doc => {
    return {
      "params": {
				"identifier": doc.identifier
			},
      "props": { doc },
    };
  });
}

const { identifier } = Astro.params;

const pageDescription = 'maps';

const { title } = Astro.props;

const viewer = import.meta.env.PUBLIC_VIEWERURL;

---

<MapLayout
  title={title}
  description={pageDescription}
>
	<Map viewer={viewer} title={title} identifier={identifier} client:only/>
</MapLayout>
