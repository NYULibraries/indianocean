/*! indianocean-site 2018-09-17 */
YUI().use("node","event","handlebars","jsonp","router","gallery-paginator","anim",function(a){"use strict";function b(){var a=c("page"),b=c("sort"),d=a?a:1,e=k.getPath()+"?page="+d;return b&&(e=e+"&sort="+b),e}function c(b){a.log("getParameterByName "+b),b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))}function d(){k.replace(b())}function e(c,d){var e=d.container.getData(),f=e.requesterror;f?(f=parseInt(f,10)+1,d.container.setAttribute("data-requesterror",f)):(d.container.setAttribute("data-requesterror",1),f=1),3>f?k.replace(b()):a.log("onFailure: there was a problem with this request")}function f(){e()}function g(b,c){try{var d=c.container,e=a.one(".resultsnum"),f=(c.page?c.page:1,parseInt(b.response.numFound,10)),g=e.one(".numfound"),h=parseInt(b.response.start,10),i=1>h?1:h+1,k=e.one(".start"),m=e.one(".docslength"),n=parseInt(b.response.docs.length,10),o=a.one("body").getAttribute("data-app");l.push(this.url),d.setAttribute("data-numFound",f),d.setAttribute("data-start",h),d.setAttribute("data-docsLength",n),k.set("innerHTML",i),m.set("innerHTML",h+n),g.set("innerHTML",f),d.append(j({items:b.response.docs,app:{appRoot:o}})),c.container.setAttribute("data-requesterror",0),a.one("body").removeClass("io-loading")}catch(p){}}function h(b){var c=0,d=0,h=a.one("#browse-select :checked"),i=h.get("value"),j=h.getAttribute("data-sort-dir"),k=b.container.getData(),l=a.one("body").getAttribute("data-discoUrl"),m=k.fl?k.fl:"*",n=k.rows?k.rows:10,o=[];a.one("body").addClass("io-loading");for(var p in k)k.hasOwnProperty(p)&&p.match("fq-")&&o.push(p.replace("fq-","")+":"+k[p]);b.page&&(d=parseInt(b.page,10)),b.start&&(c=parseInt(b.start,10)),b.rows&&(n=parseInt(b.rows,10)),l=l+"?wt=json&json.wrf=callback={callback}&fl="+m+"&fq="+o.join("&fq=")+"&rows="+n+"&start="+c+"&sort="+i+"%20"+j,b.container.empty(),a.jsonp(l,{on:{success:g,failure:e,timeout:f},args:b,timeout:3e3})}var i=a.one("#items").getHTML(),j=a.Handlebars.compile(i),k=new a.Router,l=[];k.route(k.getPath(),function(b){var c=a.one('[data-name="items"]'),d=c.getData(),e=b.query.rows?b.query.rows:d.rows?d.rows:10,f=b.query.sort?b.query.sort:d.sort?d.sort:a.one("#browse-select").get("value"),g=b.query.page?parseInt(b.query.page,10):0,i=0;i=1>=g?0:g*e-e,h({container:c,start:i,page:g,rows:e,sort:f})}),k.replace(b()),a.one("body").delegate("change",d,"#browse-select")});